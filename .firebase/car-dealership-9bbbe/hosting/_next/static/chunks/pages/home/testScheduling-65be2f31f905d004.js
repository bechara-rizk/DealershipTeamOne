(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[765],{6144:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home/testScheduling",function(){return a(4004)}])},4914:function(e,s,a){"use strict";var t=a(5893),i=a(7309),l=a(3349),n=a(2529);let r=()=>{let[e,s]=(0,l.F_)(i.I8);return s?(0,t.jsxs)("div",{className:"authButtons",children:[(0,t.jsx)("img",{src:"/images/logo.jpg",alt:"logo",className:"homepageLogo"}),(0,t.jsx)("div",{className:"authContainer",children:(0,t.jsxs)("div",{className:"dropdown",style:{"z-index":"-99"},children:[(0,t.jsxs)("button",{className:"dropbtn",children:["Login ",(0,t.jsx)("i",{className:"arrowLogin down"}),(0,t.jsx)("i",{className:"fa fa-caret-down"})]}),(0,t.jsxs)("div",{className:"dropdown-content",children:[(0,t.jsx)("a",{href:"/auth/Login",children:"Login"}),(0,t.jsx)("a",{href:"/auth/Register",children:"Sign Up"})]})]})})]}):(0,t.jsxs)("div",{className:"authButtons",children:[(0,t.jsx)("img",{src:"/images/logo.jpg",alt:"logo",className:"homepageLogo"}),(0,t.jsxs)("div",{className:"authwrapper",children:[(0,t.jsx)("div",{className:"authContainer",children:(0,t.jsxs)("div",{className:"dropdown",children:[(0,t.jsxs)("button",{className:"dropbtn",children:[e?"Sign Out":"Login"," ",(0,t.jsx)("i",{className:"arrowLogin down"}),(0,t.jsx)("i",{className:"fa fa-caret-down"})]}),(0,t.jsx)("div",{className:"dropdown-content",children:e?(0,t.jsxs)(t.Fragment,{children:["4rplVi6gQfW4oZSvnXGf1D4z05x2"===e.uid?(0,t.jsx)("a",{href:"/dashboard/home",children:"Admin"}):null,(0,t.jsx)("a",{href:"",onClick:()=>i.I8.signOut(),children:"Sign out"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("a",{href:"/auth/Login",children:"Login"}),(0,t.jsx)("a",{href:"/auth/Register",children:"Sign Up"})]})})]})}),(0,t.jsx)("div",{className:"user-profile",children:e&&(0,t.jsx)("div",{className:"profile",children:(0,t.jsx)(n.default,{})})})]})]})};s.Z=r},4004:function(e,s,a){"use strict";a.r(s);var t=a(5893),i=a(7294),l=a(9198),n=a.n(l);a(459);var r=a(831),c=a(5700),d=a(4914),o=a(7309),m=a(9828);let h=async()=>{let e=o.RZ,s=(0,m.hJ)(e,"listings"),a=(0,m.IO)(s,(0,m.ar)("sold","==",!1)),t=await (0,m.PL)(a),i=t.docs.map(e=>e.data());return i},u=async(e,s,a,t)=>{let i={car:e,date:s,time:a,userID:t.uid,status:0},l=o.RZ,n=(0,m.hJ)(l,"testDrives");await (0,m.ET)(n,i)};s.default=function(){let[e,s]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),[m,x]=(0,i.useState)([]),[j,v]=(0,i.useState)(0),[p,g]=(0,i.useState)(null),[N,f]=(0,i.useState)(null),[b,D]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=async()=>{let e=await h();f(e),D(!1)};e()},[]);let S=async t=>{if(t.preventDefault(),!p){alert("Please select a date.");return}let i=p.toISOString().slice(0,10);if(m.some(e=>e.time===a&&e.date===i)){alert("Selected time slot is already scheduled. Please choose a different time slot.");return}await u(e,i,a,o.I8.currentUser),x([...m,{car:e,time:a,date:i}]),s(""),l(""),v(j+1);let n=window.confirm("Would you like to schedule another test drive?");n||(t.target.elements.date.value="")},w=new Date;w.setDate(w.getDate()+1);let L=w.toISOString().slice(0,10),T=new Date;T.setDate(T.getDate()+7);let y=T.toISOString().slice(0,10);return b?(0,t.jsx)("div",{children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"TestSchedulingUser",children:[(0,t.jsx)(r.Z,{}),(0,t.jsx)("div",{className:"testDriveContainer",children:o.I8.currentUser?(0,t.jsx)("div",{className:"testDriveContainer",children:(0,t.jsxs)("div",{className:"testDriveBox",children:[(0,t.jsx)("h1",{className:"testDriveTitle",children:"Schedule your test drive Now"}),(0,t.jsx)("p",{className:"testDriveLabel",children:"Select a car and available time slot to schedule a test drive."}),(0,t.jsxs)("form",{onSubmit:S,children:[(0,t.jsx)("label",{htmlFor:"car",className:"testDriveLabel",children:"Car:"}),(0,t.jsxs)("select",{className:"pleasebeblack",id:"carselect",value:e,onChange:e=>s(e.target.value),name:"carclient",children:[(0,t.jsx)("option",{value:"",className:"selectacar",children:"-- Select a car --"}),N.map((e,s)=>(0,t.jsx)("option",{value:e.make+" "+e.model,children:e.make+" "+e.model},s))]}),(0,t.jsx)("br",{}),(0,t.jsxs)("div",{className:"date-picker-container",children:[(0,t.jsx)("label",{htmlFor:"date",className:"testDriveLabel",children:"Date:"}),(0,t.jsx)(n(),{className:"pleasebeblack2",selected:p,onChange:e=>g(e),minDate:new Date(L),maxDate:new Date(y),filterDate:e=>0!==e.getDay(),required:!0,name:"dateclient",disabled:!e||"Select-A-TestCar"===e})]}),(0,t.jsx)("br",{}),(0,t.jsx)("label",{htmlFor:"time",className:"testDriveLabelTime",children:"Time:"}),(0,t.jsxs)("select",{id:"time",className:"pleasebeblack3",value:a,onChange:e=>l(e.target.value),required:!0,name:"timeclient",disabled:!e||"Select-A-TestCar"===e||!p,children:[(0,t.jsx)("option",{value:"",children:"--  Select time --"}),(0,t.jsx)("option",{value:"9:00am",children:"9:00am"}),(0,t.jsx)("option",{value:"10:00am",children:"10:00am"}),(0,t.jsx)("option",{value:"11:00am",children:"11:00am"}),(0,t.jsx)("option",{value:"12:00pm",children:"12:00pm"}),(0,t.jsx)("option",{value:"1:00pm",children:"1:00pm"}),(0,t.jsx)("option",{value:"2:00pm",children:"2:00pm"}),(0,t.jsx)("option",{value:"3:00pm",children:"3:00pm"}),(0,t.jsx)("option",{value:"4:00pm",children:"4:00pm"})]}),(0,t.jsx)("br",{}),(0,t.jsx)("input",{type:"text",hidden:!0,value:"bechara",name:"nameclient"}),(0,t.jsx)("input",{type:"text",hidden:!0,value:"becharaerizk@yahoo.com",name:"emailclient"}),(0,t.jsx)("br",{}),(0,t.jsx)("button",{type:"submit",className:"testDriveSubmit",disabled:j>=3,children:"Schedule Test Drive"})]}),m.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"testDriveTitle",children:"Scheduled Test Drives:"}),(0,t.jsx)("ul",{children:m.map((e,s)=>(0,t.jsxs)("li",{style:{borderBottom:"1px solid #000",marginBottom:"10px",paddingBottom:"10px"},children:["Test Drive Request for Car: ",e.car,", Time: ",e.time,", Date: ",e.date," has been Requested Successfully"]},s))})]}),j>=3&&(0,t.jsx)("p",{className:"testDriveMessage",children:"You have reached the maximum number of scheduled test drives (3)."})]})}):(0,t.jsx)("div",{className:"testDriveContainer",children:(0,t.jsxs)("div",{className:"testDriveBox",children:[(0,t.jsx)("h1",{className:"testDriveTitle",children:"You must login to schedule a test drive"}),(0,t.jsx)("a",{href:"/auth/Login",className:"testDriveTitle",children:"Login Now"})]})})}),(0,t.jsx)(c.Z,{})]})]})}}},function(e){e.O(0,[16,677,976,948,163,664,603,349,863,636,896,774,888,179],function(){return e(e.s=6144)}),_N_E=e.O()}]);